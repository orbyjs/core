!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["@orby/core"]={})}(this,function(e){"use strict";class t{constructor(e,t={},n=[]){this.tag=e,this.props=Object.assign({},t,{children:n})}clone(e=this.tag,n=this.props,r=this.props.children){return new t(e,n,r)}emit(e,...t){this.prevent||("remove"===e&&(this.prevent=!0),"function"==typeof this.props[e]&&this.props[e](...t))}}function n(e){return"object"==typeof e&&e instanceof t}function r(e){return e.shadowRoot||e}function o(e,t){r(e).removeChild(t)}function i(e,t){r(e).appendChild(t)}const s="__master__",c="__remove__",f=["children","create","remove","context","state"];function p(e,a,d,h,g){return function e(a,d,h,g={},m){h=n(h)?h:new t("",{},[h||""]);let y,v,b=d,{prev:w=new t,components:x=new Map}=l(b),_=h.props.context;g=_?Object.assign({},g,_):g;m="svg"===h.tag||m;"function"==typeof h.tag&&(y=h.tag,x.has(y)||x.set(y,function(e,t,n){return function r(o,i,s,f){return i=p(e(s,{set:e=>{i[c]||(t=e,i=r(o,i,s,f))},get:()=>t},f),o,i,f,n)}}(y,h.props.state,m)),h=h.clone(w.tag||(m?"g":"")));let j=h.props.children;if(h.tag!==w.tag){if(b=function(e,t){return t?document.createElementNS("http://www.w3.org/2000/svg",e):e?document.createElement(e):document.createTextNode("")}(h.tag,m),d){if(!y&&""!==h.tag){let e=j.length;for(;d.firstChild&&e--;)i(b,d.firstChild)}!function(e,t,n){r(e).replaceChild(t,n)}(a,b,d),u(d)}else i(a,b);v=!0,h.emit("create",b)}if(y&&x.has(y))return x.get(y)(a,b,h.props,g);if(h.tag){if(v||!1!==h.emit("update",h.props,b)){!function(e,t,n,r){let o=Object.keys(t),i=Object.keys(n).filter(e=>-1===o.indexOf(e)),s=o.concat(i);for(let o=0;o<s.length;o++){let i=s[o];if(t[i]===n[i]||f.indexOf(i)>-1)continue;let c="function"==typeof t[i],p="function"==typeof n[i];if(c||p)c&&e.removeEventListener(i,t[i]),p&&e.addEventListener(i,n[i]);else if(i in n)if(i in e&&!r||r&&"style"===i)if("style"===i)if("object"==typeof n[i]){let r=t[i]||{},o=n[i];for(let t in o)r[t]!==o[t]&&("-"===t[0]?e.setProperty(t,o[t]):e.style[t]=o[t]);n[i]=Object.assign({},r,o)}else e.style.cssText=n[i];else e[i]=n[i];else r?e.setAttributeNS(null,i,n[i]):e.setAttribute(i,n[i]);else e.removeAttribute(i)}}(b,w.props,h.props,m);let t=Array.from(b.childNodes),n=Math.max(t.length,j.length);for(let r=0;r<n;r++)j[r]?e(b,t[r],j[r],g,m):t[r]&&(u(t[r]),o(b,t[r]))}}else w.props.children[0]!==h.props.children[0]&&(b.textContent=h.props.children[0]);b[s]={prev:y?l(b).prev:h,components:x};h.emit(v?"created":"updated",b);return b}(a,d,e,h,g)}function l(e){return e&&e[s]||{}}function u(e){let{prev:n=new t}=l(e),r=e.childNodes;e[c]=!0,n.emit("remove",e);for(let e=0;e<r.length;e++)u(r[e]);n.emit("removed",e)}e.render=p,e.h=function(e,r,...o){return new t(e||"",r,function e(r,o=[]){for(let i=0;i<r.length;i++){let s=r[i];Array.isArray(s)?e(s,o):o.push(n(s)?s:new t("",{},[s||""]))}return o}(o))},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=orby.umd.js.map
